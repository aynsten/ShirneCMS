{"version":3,"sources":["common.js","template.js","datetime.init.js","dialog.js","jquery.tag.js","front.js"],"names":["del","obj","msg","dialog","confirm","location","href","$","attr","lang","key","window","language","randomString","len","charSet","str","allLen","length","i","randomPoz","Math","floor","random","substring","copy_obj","arr","JSON","parse","stringify","isObjectValueEqual","a","b","aProps","Object","getOwnPropertyNames","bProps","propName","array_combine","tostring","toString","callfunc","val","func","args","thisobj","split","argidx","indexOf","concat","apply","iif","v","m1","m2","transOption","option","newopt","Number","prototype","format","fix","undefined","z","this","toFixed","f","l","unshift","join","String","trim","replace","compile","data","list","temps","push","all","condition","cont","operation","conts","match","part","result","keys","d","dialogTpl","dialogIdx","format_btn","btn","isdefault","_typeof","text","type","Dialog","opts","btns","Array","console","error","options","extend","id","header","footer","backdrop","tabindex","size","contentClass","onsure","onshow","onshown","onhide","onhidden","btncount","addbtn","splice","addbtns","closed","box","generBtn","opt","idx","getDefaultBtn","show","html","title","document","body","append","bodyClass","unbind","find","remove","css","height","overflow","keyboard","self","instance","on","click","modal","hide","close","message","time","success","warning","info","loading","cssClass","icon","dlg","setTimeout","alert","callback","called","iscallback","isPlainObject","iconMap","color","cancel","countdown","inteval","clearInterval","btnText","addClass","setInterval","removeClass","prompt","contentHtml","is_multi","multiset","content","multi","inputHtml","focus","inputs","each","input","action","actions","e","index","pickList","config","filter","url","call","isajax","name","searchHolder","idkey","titlekey","onRow","rowTemplate","current","exthtml","contentTpl","listbox","isloading","extField","htmlRow","ajax","dataType","json","code","trigger","pickUser","get_search_url","pickArticle","get_cate_url","pickProduct","titletpl","pickLocate","locate","settedLocate","mapbox","mapinfo","map","InitMap","address","lng","lat","search","setLocate","showAtCenter","keyCode","jQuery","Zepto","fn","tags","nm","onupdate","tpl","item","parents","labelgroup","before","updated","vals","label","tag","datetimepicker","tooltips","today","clear","selectMonth","prevMonth","nextMonth","selectYear","prevYear","nextYear","selectDecade","selectTime","prevDecade","nextDecade","prevCentury","nextCentury","locale","showClear","showTodayButton","showClose","keepInvalid","from","to","minDate","maxDate","setNav","nav","items","finded","eq","substr","lastIndexOf","width","hover","stop","slideDown","slideUp","preventDefault","stopPropagation","opened","p","siblings","children"],"mappings":"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","file":"init.min.js","sourcesContent":["function del(obj,msg) {\r\n    dialog.confirm(msg,function(){\r\n        location.href=$(obj).attr('href');\r\n    });\r\n    return false;\r\n}\r\n\r\nfunction lang(key) {\r\n    if(window.language && window.language[key]){\r\n        return window.language[key];\r\n    }\r\n    return key;\r\n}\r\n\r\nfunction randomString(len, charSet) {\r\n    charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var str = '',allLen=charSet.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var randomPoz = Math.floor(Math.random() * allLen);\r\n        str += charSet.substring(randomPoz,randomPoz+1);\r\n    }\r\n    return str;\r\n}\r\n\r\nfunction copy_obj(arr){\r\n    return JSON.parse(JSON.stringify(arr));\r\n}\r\n\r\nfunction isObjectValueEqual(a, b) {\r\n    if(!a && !b)return true;\r\n    if(!a || !b)return false;\r\n\r\n    // Of course, we can do it use for in\r\n    // Create arrays of property names\r\n    var aProps = Object.getOwnPropertyNames(a);\r\n    var bProps = Object.getOwnPropertyNames(b);\r\n\r\n    // If number of properties is different,\r\n    // objects are not equivalent\r\n    if (aProps.length != bProps.length) {\r\n        return false;\r\n    }\r\n\r\n    for (var i = 0; i < aProps.length; i++) {\r\n        var propName = aProps[i];\r\n\r\n        // If values of same property are not equal,\r\n        // objects are not equivalent\r\n        if (a[propName] !== b[propName]) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // If we made it this far, objects\r\n    // are considered equivalent\r\n    return true;\r\n}\r\n\r\nfunction array_combine(a,b) {\r\n    var obj={};\r\n    for(var i=0;i<a.length;i++){\r\n        if(b.length<i+1)break;\r\n        obj[a[i]]=b[i];\r\n    }\r\n    return obj;\r\n}","\r\nNumber.prototype.format=function(fix){\r\n    if(fix===undefined)fix=2;\r\n    var num=this.toFixed(fix);\r\n    var z=num.split('.');\r\n    var format=[],f=z[0].split(''),l=f.length;\r\n    for(var i=0;i<l;i++){\r\n        if(i>0 && i % 3==0){\r\n            format.unshift(',');\r\n        }\r\n        format.unshift(f[l-i-1]);\r\n    }\r\n    return format.join('')+(z.length==2?'.'+z[1]:'');\r\n};\r\nif(!String.prototype.trim){\r\n    String.prototype.trim=function () {\r\n        return this.replace(/(^\\s+|\\s+$)/g,'');\r\n    }\r\n}\r\nString.prototype.compile=function(data,list){\r\n\r\n    if(list){\r\n        var temps=[];\r\n        for(var i in data){\r\n            temps.push(this.compile(data[i]));\r\n        }\r\n        return temps.join(\"\\n\");\r\n    }else{\r\n        return this.replace(/\\{if\\s+([^\\}]+)\\}([\\W\\w]*?){\\/if}/g,function(all, condition, cont){\r\n            var operation;\r\n            var conts=cont.split('{else}');\r\n            if(operation=condition.match(/\\s+(=+|<|>)\\s+/)){\r\n                operation=operation[0];\r\n                var part=condition.split(operation);\r\n                if(part[0].indexOf('@')===0){\r\n                    part[0]=data[part[0].replace('@','')];\r\n                }\r\n                if(part[1].indexOf('@')===0){\r\n                    part[1]=data[part[1].replace('@','')];\r\n                }\r\n                operation=operation.trim();\r\n                var result=false;\r\n                switch (operation){\r\n                    case '==':\r\n                        result = part[0] == part[1];\r\n                        break;\r\n                    case '===':\r\n                        result = part[0] === part[1];\r\n                        break;\r\n                    case '>':\r\n                        result = part[0] > part[1];\r\n                        break;\r\n                    case '<':\r\n                        result = part[0] < part[1];\r\n                        break;\r\n                }\r\n                if(result){\r\n                    return cont;\r\n                }else if(conts[1]){\r\n                    return conts[1];\r\n                }\r\n            }else {\r\n                if (data[condition.replace('@','')]) return conts[0];\r\n                else if(conts[1]) return conts[1];\r\n            }\r\n            return '';\r\n        }).replace(/\\{@([\\w\\d\\.]+)(?:\\|([\\w\\d]+)(?:\\s*=\\s*([^\\}]+))?)?\\}/g,function(all,m1,func,args){\r\n\r\n            if(m1.indexOf('.')>0){\r\n                var keys=m1.split('.'),val=data;\r\n                for(var i=0;i<keys.length;i++){\r\n                    if(val[keys[i]]!==undefined && val[keys[i]]!==null){\r\n                        val=val[keys[i]];\r\n                    }else{\r\n                        val = '';\r\n                        break;\r\n                    }\r\n                }\r\n                return callfunc(val,func,args);\r\n            }else{\r\n                return callfunc(data[m1],func,args,data);\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nfunction tostring(obj) {\r\n    if(obj && obj.toString){\r\n        return obj.toString();\r\n    }\r\n    return '';\r\n}\r\n\r\nfunction callfunc(val,func,args,thisobj){\r\n    if(!args){\r\n        args=[val];\r\n    }else{\r\n        if(typeof args==='string')args=args.split(',');\r\n        var argidx=args.indexOf('###');\r\n        if(argidx>=0){\r\n            args[argidx]=val;\r\n        }else{\r\n            args=[val].concat(args);\r\n        }\r\n    }\r\n\r\n    return window[func]?window[func].apply(thisobj,args):((val===undefined||val===null)?'':val);\r\n}\r\n\r\nfunction iif(v,m1,m2){\r\n    if(v==='0')v=0;\r\n    return v?m1:m2;\r\n}\r\n\r\nwindow['default']=function (v,d) {\r\n    return v?v:d;\r\n};","function transOption(option) {\r\n    if(!option)return {};\r\n    var newopt={};\r\n    for(var i in option){\r\n        switch (i){\r\n            case 'viewmode':\r\n                newopt['viewMode']=option[i];\r\n                break;\r\n            case 'keepopen':\r\n                newopt['keepOpen']=option[i];\r\n                break;\r\n            default:\r\n                newopt[i]=option[i];\r\n        }\r\n    }\r\n    return newopt;\r\n}\r\n\r\n//日期组件\r\nif($.fn.datetimepicker) {\r\n    var tooltips= {\r\n        today: '定位当前日期',\r\n        clear: '清除已选日期',\r\n        close: '关闭选择器',\r\n        selectMonth: '选择月份',\r\n        prevMonth: '上个月',\r\n        nextMonth: '下个月',\r\n        selectYear: '选择年份',\r\n        prevYear: '上一年',\r\n        nextYear: '下一年',\r\n        selectDecade: '选择年份区间',\r\n        selectTime:'选择时间',\r\n        prevDecade: '上一区间',\r\n        nextDecade: '下一区间',\r\n        prevCentury: '上个世纪',\r\n        nextCentury: '下个世纪'\r\n    };\r\n\r\n\r\n    $('.datepicker').each(function(){\r\n        var config=$.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale: 'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },transOption($(this).data()));\r\n\r\n        $(this).datetimepicker(config);\r\n    });\r\n\r\n    $('.date-range').each(function () {\r\n        var from = $(this).find('[name=fromdate],.fromdate'), to = $(this).find('[name=todate],.todate');\r\n        var options = $.extend({\r\n            tooltips:tooltips,\r\n            format: 'YYYY-MM-DD',\r\n            locale:'zh-cn',\r\n            showClear:true,\r\n            showTodayButton:true,\r\n            showClose:true,\r\n            keepInvalid:true\r\n        },$(this).data());\r\n        from.datetimepicker(options).on('dp.change', function () {\r\n            if (from.val()) {\r\n                to.data('DateTimePicker').minDate(from.val());\r\n            }\r\n        });\r\n        to.datetimepicker(options).on('dp.change', function () {\r\n            if (to.val()) {\r\n                from.data('DateTimePicker').maxDate(to.val());\r\n            }\r\n        });\r\n    });\r\n}","(function(window,$){\r\n    var dialogTpl='<div class=\"modal fade\" id=\"{@id}\" {if tabindex}tabindex=\"{@tabindex}\"{/if} role=\"dialog\" aria-labelledby=\"{@id}Label\" aria-hidden=\"true\">\\n' +\r\n        '    <div class=\"modal-dialog {@size}\">\\n' +\r\n        '        <div class=\"modal-content {@contentClass}\">\\n' +\r\n        '            <div class=\"modal-header\">\\n' +\r\n        '                <h4 class=\"modal-title\" id=\"{@id}Label\">{@title}</h4>\\n' +\r\n        '                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\\n' +\r\n        '                    <span aria-hidden=\"true\">&times;</span>\\n' +\r\n        '                    <span class=\"sr-only\">Close</span>\\n' +\r\n        '                </button>\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-body {@bodyClass}\">\\n' +\r\n        '            </div>\\n' +\r\n        '            <div class=\"modal-footer\">\\n' +\r\n        '                <nav class=\"nav nav-fill\"></nav>\\n' +\r\n        '            </div>\\n' +\r\n        '        </div>\\n' +\r\n        '    </div>\\n' +\r\n        '</div>';\r\n    var dialogIdx=0;\r\n    function format_btn(btn,isdefault){\r\n        if(typeof(btn) === typeof 'a'){\r\n            btn = {'text':btn,'isdefault':isdefault?true:false};\r\n        }\r\n        if(btn.isdefault){\r\n            if(!btn.type){\r\n                btn.type='primary'\r\n            }\r\n        }\r\n        return btn;\r\n    }\r\n    function Dialog(opts){\r\n        if(!opts)opts={};\r\n        //处理按钮\r\n        if(opts.btns) {\r\n            if (typeof(opts.btns) == 'string') {\r\n                opts.btns = [format_btn(opts.btns,true)];\r\n            }\r\n            else if(opts.btns instanceof Array) {\r\n                for (var i = 0; i < opts.btns.length; i++) {\r\n                    opts.btns[i] = format_btn(opts.btns[i])\r\n                }\r\n            }else{\r\n                console.error('Dialog::construct argument btns error.');\r\n                opts.btns=[];\r\n            }\r\n        }\r\n\r\n        this.options=$.extend({\r\n            id:'modal_dialog_'+dialogIdx++,\r\n            header:true,\r\n            footer:true,\r\n            backdrop:true,\r\n            tabindex:-1,\r\n            size:'',\r\n            btns:[\r\n                {'text':'取消','type':'secondary'},\r\n                {'text':'确定','isdefault':true,'type':'primary'}\r\n            ],\r\n            contentClass:'',\r\n            onsure:null,\r\n            onshow:null,\r\n            onshown:null,\r\n            onhide:null,\r\n            onhidden:null\r\n        },opts);\r\n        if(!this.options.btns)this.options.btns=[];\r\n        var btncount=this.options.btns.length;\r\n        if(opts.addbtn){\r\n            if(!this.options.btns)this.options.btns=[];\r\n            opts.addbtn = format_btn(opts.addbtn)\r\n            if(btncount<1) {\r\n                this.options.btns.unshift(opts.addbtn)\r\n            }else{\r\n                this.options.btns.splice(btncount-1,0,opts.addbtn)\r\n            }\r\n            btncount=1\r\n        }\r\n        if(opts.addbtns){\r\n            if(!this.options.btns)this.options.btns=[];\r\n            if(btncount<1){\r\n                this.options.btns=opts.addbtns\r\n            }else{\r\n                var args=[btncount-1,0]\r\n                for(var i=0;i<opts.addbtns.length;i++){\r\n                    args.push(format_btn(opts.addbtns[i]))\r\n                }\r\n                this.options.btns.splice.apply(this.options.btns,args)\r\n            }\r\n            btncount=1\r\n        }\r\n        if(btncount<1){\r\n            this.options.footer=false;\r\n        }\r\n\r\n        this.closed=true;\r\n        this.box=$(this.options.id);\r\n    }\r\n    Dialog.prototype.generBtn=function(opt,idx){\r\n        if(opt['type'])opt['class']='btn-outline-'+opt['type'];\r\n        return '<a href=\"javascript:\" class=\"nav-item btn '+(opt['class']?opt['class']:'btn-outline-secondary')+'\" '+(opt.isdefault?'default':'')+' data-index=\"'+idx+'\">'+opt.text+'</a>';\r\n    };\r\n    Dialog.prototype.getDefaultBtn=function(){\r\n        var btn=null\r\n        for(var i=0;i<this.options.btns.length;i++){\r\n            btn=this.options.btns[i]\r\n            if(btn.isdefault)break;\r\n        }\r\n        return btn\r\n    }\r\n    Dialog.prototype.show=function(html,title){\r\n        this.box=$('#'+this.options.id);\r\n        if(!title)title='系统提示';\r\n\r\n        if(this.box.length<1) {\r\n            $(document.body).append(dialogTpl.compile({\r\n                id: this.options.id,\r\n                bodyClass:this.options.bodyClass,\r\n                contentClass:this.options.contentClass,\r\n                tabindex:this.options.tabindex,\r\n                size:this.options.size?('modal-'+this.options.size):'',\r\n                title:title\r\n            }));\r\n            this.box=$('#'+this.options.id);\r\n        }else{\r\n            this.box.unbind();\r\n            this.box.find('.modal-title').text(title);\r\n        }\r\n        if(!this.options.header){\r\n            this.box.find('.modal-header').remove();\r\n        }\r\n        if(!this.options.footer){\r\n            this.box.find('.modal-footer').remove();\r\n        }\r\n        if(this.options.backdrop!==true){\r\n            this.box.data('backdrop',this.options.backdrop);\r\n\r\n            //不需要背景的情况下会影响下面元素的点击\r\n            if(this.options.backdrop===false) {\r\n                this.box.css({'height':0,'overflow':'visible'});\r\n            }\r\n        }\r\n        if(!this.options.keyboard){\r\n            this.box.data('keyboard',false);\r\n        }\r\n\r\n        var self=this;\r\n        Dialog.instance=self;\r\n\r\n        //生成按钮\r\n        var btns=[];\r\n        for(var i=0;i<this.options.btns.length;i++){\r\n            btns.push(this.generBtn(this.options.btns[i],i));\r\n        }\r\n        this.box.find('.modal-footer .nav').html(btns.join('\\n'));\r\n\r\n        var body=this.box.find('.modal-body');\r\n        body.html(html);\r\n        this.box.on('hide.bs.modal',function(){\r\n            if(self.options.onhide){\r\n                self.options.onhide(body,self.box);\r\n            }\r\n            Dialog.instance=null;\r\n        });\r\n        this.box.on('hidden.bs.modal',function(){\r\n            if(self.options.onhidden){\r\n                self.options.onhidden(body,self.box);\r\n            }\r\n            self.closed=true;\r\n            self.box.remove();\r\n            self.box=null;\r\n        });\r\n        this.box.on('show.bs.modal',function(){\r\n            if(self.options.onshow){\r\n                self.options.onshow(body,self.box);\r\n            }\r\n        });\r\n        this.box.on('shown.bs.modal',function(){\r\n            if(self.options.onshown){\r\n                self.options.onshown(body,self.box);\r\n            }\r\n        });\r\n        if(this.options.footer) {\r\n            this.box.find('.modal-footer .btn').click(function () {\r\n                var result = true, idx = $(this).data('index');\r\n                if (self.options.btns[idx].click) {\r\n                    result = self.options.btns[idx].click.apply(this, [body, self.box]);\r\n                }else {\r\n                    if (self.options.btns[idx].isdefault) {\r\n                        if (self.options.onsure) {\r\n                            result = self.options.onsure.apply(this, [body, self.box]);\r\n                        }\r\n                    }\r\n                }\r\n                if (result !== false) {\r\n                    self.box.modal('hide');\r\n                }\r\n            });\r\n        }\r\n        this.closed=false;\r\n        this.box.modal('show');\r\n        return this;\r\n    };\r\n    Dialog.prototype.hide=Dialog.prototype.close=function(){\r\n        if(this.box && !this.closed) {\r\n            this.closed=true;\r\n            this.box.modal('hide');\r\n        }\r\n        return this;\r\n    };\r\n\r\n    var dialog={\r\n        error:function (message,time) {\r\n            return this.message(message,'error',time);\r\n        },\r\n        success:function (message,time) {\r\n            return this.message(message,'success',time);\r\n        },\r\n        warning:function (message,time) {\r\n            return this.message(message,'warning',time);\r\n        },\r\n        info:function (message,time) {\r\n            return this.message(message,'info',time);\r\n        },\r\n        loading:function (message,time) {\r\n            return this.message(message?message:'加载中...','loading',time);\r\n        },\r\n        message:function (message,type,time) {\r\n            var cssClass='bg-info text-white';\r\n            var icon='information-circle';\r\n            if(type) {\r\n                switch (type) {\r\n                    case 'danger':\r\n                    case 'error':\r\n                        icon='close-circle';\r\n                        cssClass='bg-danger text-white';\r\n                        break;\r\n                    case 'warning':\r\n                        icon='warning';\r\n                        cssClass='bg-warning text-white';\r\n                        break;\r\n                    case 'loading':\r\n                        icon='<div class=\"spinner-border text-light\" role=\"status\">\\n' +\r\n                            '  <span class=\"sr-only\">Loading...</span>\\n' +\r\n                            '</div>';\r\n                        cssClass='bg-info text-white';\r\n                        if(!time)time=10;\r\n                        break;\r\n                    case 'success':\r\n                        icon='checkmark-circle';\r\n                        cssClass='bg-success text-white';\r\n                        break;\r\n                }\r\n            }\r\n            if(type != 'loading')icon= '<i class=\"ion-md-'+icon+'\"></i>';\r\n            var html='<div class=\"dialog-message\" >'+icon+'&nbsp;&nbsp;'+message+(type=='loading'?'':'<a href=\"javascript:\" class=\"ion-md-close closebtn\"></a>')+'</div>';\r\n\r\n            var dlg= new Dialog({\r\n                footer:false,\r\n                header:false,\r\n                backdrop:false,\r\n                tabindex:'',\r\n                size:'sm',\r\n                contentClass:cssClass,\r\n                onshow:function (body) {\r\n                    body.find('.closebtn').click(function () {\r\n                        dlg.close();\r\n                    })\r\n                }\r\n            }).show(html,'');\r\n            if(!time)time=2;\r\n            setTimeout(function(){dlg.close();},time*1000);\r\n            return dlg;\r\n        },\r\n        alert:function(message,callback,icon){\r\n            var called=false;\r\n            var iscallback=typeof callback=='function';\r\n            var title='';\r\n            var size='sm';\r\n            var html='';\r\n            if(callback!==undefined && !iscallback){\r\n                icon=callback;\r\n            }\r\n            if($.isPlainObject(message)){\r\n                if(message['title']){\r\n                    title=message['title'];\r\n                }\r\n                if(message['size']!==undefined){\r\n                    size=message['size'];\r\n                }\r\n                if(message['content']===undefined){\r\n                    throw 'message.content can not be empty.';\r\n                }\r\n                message=message['content'];\r\n            }\r\n            var iconMap= {\r\n                success:'checkmark-circle',\r\n                info: 'information-circle',\r\n                warning:'alert',\r\n                error:'remove-circle'\r\n            };\r\n            var color='primary';\r\n            if(icon===undefined)icon='information-circle';\r\n            else if(iconMap[icon]){\r\n                color=icon=='error'?'danger':icon;\r\n                icon=iconMap[icon];\r\n            }\r\n            if(icon) {\r\n                html = '<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                    message: message,\r\n                    icon: icon,\r\n                    color: color\r\n                });\r\n            }else{\r\n                html=message;\r\n            }\r\n            return new Dialog({\r\n                btns:'确定',\r\n                size:size,\r\n                header:title?true:false,\r\n                onsure:function(){\r\n                    if(iscallback){\r\n                        called=true;\r\n                        return callback(true);\r\n                    }\r\n                },\r\n                onhide:function(){\r\n                    if(!called && iscallback){\r\n                        callback(false);\r\n                    }\r\n                }\r\n            }).show(html,title);\r\n        },\r\n        confirm:function(message,confirm,cancel, icon, countdown){\r\n            var called=false;\r\n            if(typeof confirm !== 'function'){\r\n                icon = confirm;\r\n                if(typeof cancel === 'function'){\r\n                    confirm = cancel;\r\n                    cancel = null;\r\n                }else{\r\n                    countdown = cancel;\r\n                }\r\n            }else if(typeof cancel !== 'function'){\r\n                countdown = icon;\r\n                icon = cancel;\r\n            }\r\n            if(typeof icon ===  'number'){\r\n                countdown = icon;\r\n                icon = undefined;\r\n            }\r\n\r\n            var iconMap= {\r\n                'success':'checkmark-circle',\r\n                'info': 'information-circle',\r\n                'warning':'alert',\r\n                'error':'remove-circle'\r\n            };\r\n            var color='primary';\r\n            if(!icon)icon='information-circle';\r\n            else if(iconMap[icon]){\r\n                color = icon==='error'?'danger':icon;\r\n                icon = iconMap[icon];\r\n            }\r\n            var html='<div class=\"row\" style=\"align-items: center;\"><div class=\"col-3 text-right\"><i class=\"ion-md-{@icon} text-{@color}\" style=\"font-size:3em;\"></i> </div><div class=\"col-9\" >{@message}</div> </div>'.compile({\r\n                message:message,\r\n                icon:icon,\r\n                color:color\r\n            });\r\n\r\n            var inteval=0;\r\n\r\n            var dlg = new Dialog({\r\n                header:false,\r\n                size:'sm',\r\n                backdrop:'static',\r\n                onsure:function(){\r\n                    if(confirm && typeof confirm==='function'){\r\n                        called=true;\r\n                        return confirm();\r\n                    }\r\n                },\r\n                onhide:function () {\r\n                    clearInterval(inteval);\r\n                    if(called === false && typeof cancel === 'function'){\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(html);\r\n\r\n            if(countdown && typeof countdown === 'number') {\r\n                var btn = dlg.box.find('.modal-footer .btn-outline-primary');\r\n                var btnText = dlg.getDefaultBtn().text;\r\n                btn.addClass('disabled').text(btnText+'(' + countdown + ')');\r\n                inteval = setInterval(function () {\r\n                    countdown--;\r\n                    if (countdown > 0) {\r\n                        btn.text(btnText+'(' + countdown + ')');\r\n                    } else {\r\n                        btn.text(btnText);\r\n                        btn.removeClass('disabled');\r\n                        clearInterval(inteval);\r\n                    }\r\n                }, 1000);\r\n            }\r\n            return dlg;\r\n        },\r\n        prompt:function(message,callback,cancel){\r\n            var called=false;\r\n            var contentHtml='<div class=\"form-group\">{@input}</div>';\r\n            var title='请输入信息';\r\n            var is_multi=false;\r\n            var multiset={};\r\n            if(typeof message=='string'){\r\n                title=message;\r\n            }else{\r\n                title=message.title;\r\n                if(message.content) {\r\n                    contentHtml = message.content.indexOf('{@input}') > -1 ? message.content : message.content + contentHtml;\r\n                }\r\n                if(message.multi){\r\n                    is_multi=true;\r\n                    multiset=message.multi;\r\n                }\r\n            }\r\n            var inputHtml='<input type=\"text\" name=\"confirm_input\" class=\"form-control\" />';\r\n            if(is_multi){\r\n                inputHtml='';\r\n                for(var i in multiset){\r\n                    inputHtml+= '<div class=\"input-group mt-1\"><div class=\"input-group-prepend\"><span class=\"input-group-text\">'+multiset[i]+'</span></div><input type=\"text\" data-key=\"'+i+'\" name=\"confirm_input\" class=\"form-control\" /></div>';\r\n                }\r\n            }\r\n            return new Dialog({\r\n                'backdrop':'static',\r\n                'onshow':function(body){\r\n                    if(message && message.onshow){\r\n                        message.onshow(body);\r\n                    }\r\n                },\r\n                'onshown':function(body){\r\n                    body.find('[name=confirm_input]').focus();\r\n                    if(message && message.onshown){\r\n                        message.onshown(body);\r\n                    }\r\n                },\r\n                'onsure':function(body){\r\n                    var inputs=body.find('[name=confirm_input]'),val=inputs.val();\r\n                    if(is_multi){\r\n                        val={};\r\n                        inputs.each(function () {\r\n                            var key=$(this).data('key')\r\n                            val[key]=$(this).val()\r\n                        })\r\n                    }\r\n                    if(typeof callback=='function'){\r\n                        var result = callback(val);\r\n                        if(result===true){\r\n                            called=true;\r\n                        }\r\n                        return result;\r\n                    }\r\n                },\r\n                'onhide':function () {\r\n                    if(called=false && typeof cancel=='function'){\r\n                        return cancel();\r\n                    }\r\n                }\r\n            }).show(contentHtml.compile({input:inputHtml}),title);\r\n        },\r\n        action:function (list,callback,title) {\r\n            var html='<div class=\"list-group\"><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">'+list.join('</a><a href=\"javascript:\" class=\"list-group-item list-group-item-action\">')+'</a></div>';\r\n            var actions=null;\r\n            var dlg=new Dialog({\r\n                'bodyClass':'modal-action',\r\n                'backdrop':'static',\r\n                'size':'sm',\r\n                'btns':[\r\n                    {'text':'取消','type':'secondary'}\r\n                ],\r\n                'onshow':function(body){\r\n                    actions=body.find('.list-group-item-action');\r\n                    actions.click(function (e) {\r\n                        actions.removeClass('active');\r\n                        $(this).addClass('active');\r\n                        var val=actions.index(this);\r\n                        if(typeof callback=='function'){\r\n                            if( callback(val)!==false){\r\n                                dlg.close();\r\n                            }\r\n                        }else {\r\n                            dlg.close();\r\n                        }\r\n                    })\r\n                },\r\n                'onsure':function(body){\r\n                    return true;\r\n                },\r\n                'onhide':function () {\r\n                    return true;\r\n                }\r\n            }).show(html,title?title:'请选择');\r\n        },\r\n        pickList:function (config,callback,filter) {\r\n            if(typeof config==='string')config={url:config};\r\n            if(Object.prototype.toString.call(config) == '[object Array]'){\r\n                config = {\r\n                    isajax:false,\r\n                    list:config\r\n                };\r\n            }\r\n            var icon = config.icon?'<i class=\"ion-md-checkmark\"></i> ':''\r\n            config=$.extend({\r\n                url:'',\r\n                title:'',\r\n                isajax:true,\r\n                list:[],\r\n                name:'项目',\r\n                searchHolder:'根据名称搜索',\r\n                idkey:'id',\r\n                titlekey:'title',\r\n                onRow:null,\r\n                extend:null,\r\n                rowTemplate:'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">'+icon+'[{@id}]&nbsp;{@title}</a>'\r\n            },config||{});\r\n            var current=null;\r\n            var exthtml='';\r\n            if(config.extend){\r\n                exthtml='<select name=\"'+config.extend.name+'\" class=\"form-control\"><option value=\"\">'+config.extend.title+'</option></select>';\r\n            }\r\n            if(!filter)filter={};\r\n\r\n            var title='请选择'+config.name;\r\n            var contentTpl='<div class=\"list-group list-group-picker mt-2\" style=\"max-height:500px;overflow: auto;\"></div>';\r\n            if(config.isajax){\r\n                title='请搜索并选择'+config.name;\r\n                contentTpl = '<div class=\"input-group\">'+exthtml+'<input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"'+config.searchHolder+'\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>'+contentTpl;\r\n            }\r\n            if(!config.title)config.title=title;\r\n\r\n            var dlg=new Dialog({\r\n                'backdrop':'static',\r\n                'onshown':function(body){\r\n                    var btn=body.find('.searchbtn');\r\n                    var input=body.find('.searchtext');\r\n                    var listbox=body.find('.list-group');\r\n                    var isloading=false;\r\n                    listbox.on('click','a.list-group-item',function () {\r\n                        var id = $(this).data('id');\r\n                        for (var i = 0; i < config.list.length; i++) {\r\n                            if(config.list[i][config.idkey]==id){\r\n                                current=config.list[i];\r\n                                listbox.find('a.list-group-item').removeClass('active');\r\n                                $(this).addClass('active');\r\n                                break;\r\n                            }\r\n                        }\r\n                    });\r\n                    if(!config.isajax){\r\n                        listbox.html(config.rowTemplate.compile(config.list, true));\r\n                        return;\r\n                    }\r\n                    var extField=null;\r\n                    if(config.extend){\r\n                        extField=body.find('[name='+config.extend.name+']');\r\n                        if(config.extend.list){\r\n                            extField.append(config.extend.htmlRow.compile(config.extend.list, true));\r\n                        }else {\r\n                            $.ajax({\r\n                                url: config.extend.url,\r\n                                type: 'GET',\r\n                                dataType: 'JSON',\r\n                                success: function (json) {\r\n                                    extField.append(config.extend.htmlRow.compile(json.data, true));\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    btn.click(function(){\r\n                        if(isloading)return;\r\n                        isloading=true;\r\n                        listbox.html('<span class=\"list-loading\">加载中...</span>');\r\n                        filter['key']=input.val();\r\n                        if(config.extend){\r\n                            filter[config.extend.name]=extField.val();\r\n                        }\r\n                        $.ajax(\r\n                            {\r\n                                url:config.url,\r\n                                type:'GET',\r\n                                dataType:'JSON',\r\n                                data:filter,\r\n                                success:function(json){\r\n                                    isloading=false;\r\n                                    if(json.code===1){\r\n                                        if(json.data && json.data.length) {\r\n                                            config.list = json.data\r\n                                            listbox.html(config.rowTemplate.compile(json.data, true));\r\n\r\n                                        }else{\r\n                                            listbox.html('<span class=\"list-loading\"><i class=\"ion-md-warning\"></i> 没有检索到'+config.name+'</span>');\r\n                                        }\r\n                                    }else{\r\n                                        listbox.html('<span class=\"text-danger\"><i class=\"ion-md-warning\"></i> 加载失败</span>');\r\n                                    }\r\n                                }\r\n                            }\r\n                        );\r\n\r\n                    }).trigger('click');\r\n                },\r\n                'onsure':function(body){\r\n                    if(!current){\r\n                        dialog.warning('没有选择'+config.name+'!');\r\n                        return false;\r\n                    }\r\n                    if(typeof callback=='function'){\r\n                        var result = callback(current);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show(contentTpl,config.title);\r\n            return dlg;\r\n        },\r\n        pickUser:function(callback,filter){\r\n            return this.pickList({\r\n                'url':window.get_search_url('member'),\r\n                'name':'会员',\r\n                'searchHolder':'根据会员id或名称，电话来搜索',\r\n                'rowTemplate':'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\" style=\"line-height:30px;\">{if @avatar}<img src=\"{@avatar}\" style=\"width:30px;height:30px;border-radius: 100%;margin-right:10px;\" />{else}<i class=\"ion-md-person\"></i>{/if} [{@id}]&nbsp;{if @nickname}{@nickname}{else}{@username}{/if}&nbsp;&nbsp;&nbsp;{if @mobile}<small><i class=\"ion-md-phone-portrait\"></i> {@mobile}</small>{/if}</a>'\r\n            },callback,filter);\r\n        },\r\n        pickArticle:function(callback,filter){\r\n            return this.pickList({\r\n                'url':window.get_search_url('article'),\r\n                rowTemplate:'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @cover}<div style=\"background-image:url({@cover})\" class=\"imgview\" ></div>{/if}<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@description}</div></a>',\r\n                name:'文章',\r\n                idkey:'id',\r\n                extend:{\r\n                   name:'cate',\r\n                    title:'按分类搜索',\r\n                    url:get_cate_url('article'),\r\n                    htmlRow:'<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder':'根据文章标题搜索'\r\n            },callback,filter);\r\n        },\r\n        pickProduct:function(callback,filter){\r\n            var issku = filter && filter['searchtype'];\r\n            var titletpl='<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />{@min_price}{if @max_price>@min_price}~{@max_price}{/if}</div>';\r\n            if(issku)titletpl='<div class=\"text-block\">[{@id}]&nbsp;{@title}&nbsp;<br />[{@sku_goods_no}]&nbsp;{@price}</div>';\r\n            return this.pickList({\r\n                'url':window.get_search_url('product'),\r\n                rowTemplate:'<a href=\"javascript:\" data-id=\"{@id}\" class=\"list-group-item list-group-item-action\">{if @image}<div style=\"background-image:url({@image})\" class=\"imgview\" ></div>{/if}'+titletpl+'</a>',\r\n                name:'产品',\r\n                idkey:'id',\r\n                extend:{\r\n                    name:'cate',\r\n                    title:'按分类搜索',\r\n                    url:get_cate_url('product'),\r\n                    htmlRow:'<option value=\"{@id}\">{@html}{@title}</option>'\r\n                },\r\n                'searchHolder':'根据产品名称搜索'\r\n            },callback,filter);\r\n        },\r\n        pickLocate:function(type, callback, locate){\r\n            var settedLocate=null;\r\n            var height=$(window).height()*.6\r\n            var dlg=new Dialog({\r\n                'size':'lg',\r\n                'backdrop':'static',\r\n                'onshown':function(body){\r\n                    var btn=body.find('.searchbtn');\r\n                    var input=body.find('.searchtext');\r\n                    var mapbox=body.find('.map');\r\n                    var mapinfo=body.find('.mapinfo');\r\n                    var isloading=false;\r\n                    setTimeout(function () {\r\n                        var map=InitMap('tencent',mapbox,function(address,locate){\r\n                            mapinfo.html(address+'&nbsp;'+locate.lng+','+locate.lat);\r\n                            settedLocate=locate;\r\n                        },locate);\r\n                        btn.click(function(){\r\n                            var search=input.val();\r\n                            map.setLocate(search);\r\n                        });\r\n                        body.find('.setToCenter').click(function (e) {\r\n                            map.showAtCenter();\r\n                        })\r\n                    },500)\r\n\r\n                },\r\n                'onsure':function(body){\r\n                    if(!settedLocate){\r\n                        dialog.warning('没有选择位置!');\r\n                        return false;\r\n                    }\r\n                    if(typeof callback==='function'){\r\n                        var result = callback(settedLocate);\r\n                        return result;\r\n                    }\r\n                }\r\n            }).show('<div class=\"input-group\"><input type=\"text\" class=\"form-control searchtext\" name=\"keyword\" placeholder=\"填写地址检索位置\"/><div class=\"input-group-append\"><a class=\"btn btn-outline-secondary searchbtn\"><i class=\"ion-md-search\"></i></a></div></div>' +\r\n                '<div class=\"map mt-2\" style=\"height:'+height+'px\"></div>' +\r\n                '<div class=\"float-right mt-2 mapactions\"><a href=\"javascript:\" class=\"setToCenter\">定位到地图中心</a></div>' +\r\n                '<div class=\"mapinfo mt-2 text-muted\">未选择位置</div>','请选择地图位置');\r\n            return dlg;\r\n        }\r\n    };\r\n\r\n    //监控按键\r\n    $(document).on('keydown', function(e){\r\n        if(!Dialog.instance)return;\r\n        var dlg=Dialog.instance;\r\n        if (e.keyCode == 13) {\r\n            dlg.box.find('.modal-footer .btn[default]').trigger('click');\r\n        }\r\n        //默认已监听关闭\r\n        /*if (e.keyCode == 27) {\r\n         self.hide();\r\n         }*/\r\n    });\r\n\r\n    //暴露接口\r\n    window.Dialog=$.Dialog=Dialog;\r\n    window.dialog=$.dialog=dialog;\r\n})(window,jQuery||Zepto);\r\n\r\n","\r\njQuery.extend(jQuery.fn,{\r\n    tags:function(nm,onupdate){\r\n        var data=[];\r\n        var tpl='<span class=\"badge badge-info\">{@label}<input type=\"hidden\" name=\"'+nm+'\" value=\"{@label}\"/><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button></span>';\r\n        var item=$(this).parents('.form-control');\r\n        var labelgroup=$('<span class=\"badge-group\"></span>');\r\n        var input=this;\r\n        this.before(labelgroup);\r\n        this.on('keyup',function(){\r\n            var val=$(this).val().replace(/，/g,',');\r\n            var updated=false;\r\n            if(val && val.indexOf(',')>-1){\r\n                var vals=val.split(',');\r\n                for(var i=0;i<vals.length;i++){\r\n                    vals[i]=vals[i].replace(/^\\s|\\s$/g,'');\r\n                    if(vals[i] && data.indexOf(vals[i])===-1){\r\n                        data.push(vals[i]);\r\n                        labelgroup.append(tpl.compile({label:vals[i]}));\r\n                        updated=true;\r\n                    }\r\n                }\r\n                input.val('');\r\n                if(updated && onupdate)onupdate(data);\r\n            }\r\n        }).on('blur',function(){\r\n            var val=$(this).val();\r\n            if(val) {\r\n                $(this).val(val + ',').trigger('keyup');\r\n            }\r\n        }).trigger('blur');\r\n        labelgroup.on('click','.close',function(){\r\n            var tag=$(this).parents('.badge').find('input').val();\r\n            var id=data.indexOf(tag);\r\n            if(id)data.splice(id,1);\r\n            $(this).parents('.badge').remove();\r\n            if(onupdate)onupdate(data);\r\n        });\r\n        item.click(function(){\r\n            input.focus();\r\n        });\r\n    }\r\n});","function setNav(nav) {\r\n    var items=$('.main-nav .nav-item');\r\n    var finded=false;\r\n    for(var i=0;i<items.length;i++){\r\n        if(items.eq(i).data('model')===nav){\r\n            items.eq(i).addClass('active');\r\n            finded=true;\r\n            break;\r\n        }\r\n    }\r\n    if(!finded && nav.indexOf('-')>0){\r\n        nav=nav.substr(0,nav.lastIndexOf('-'));\r\n        setNav(nav);\r\n    }\r\n}\r\n\r\njQuery(function($){\r\n    if($(window).width()>=991){\r\n        $('.main-nav>.dropdown').hover(\r\n            function () {\r\n                $(this).find('.dropdown-menu').stop(true,false).slideDown();\r\n            },\r\n            function () {\r\n                $(this).find('.dropdown-menu').stop(true,false).slideUp();\r\n            }\r\n        );\r\n    }else{\r\n        $('.main-nav>.dropdown>.dropdown-toggle').click(function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            var opened=$(this).data('opened');\r\n            var p = $(this).parents('.dropdown');\r\n            if(opened){\r\n                p.find('.dropdown-menu').stop(true, false).slideUp();\r\n            }else {\r\n                p.siblings().children('.dropdown-menu').stop(true, false).slideUp();\r\n                p.siblings().children('.dropdown-toggle').data('opened',false);\r\n                p.find('.dropdown-menu').stop(true, false).slideDown();\r\n            }\r\n            $(this).data('opened',!opened);\r\n        })\r\n    }\r\n});"]}